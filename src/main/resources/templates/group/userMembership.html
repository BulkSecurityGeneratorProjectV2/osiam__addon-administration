<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title th:text="#{edit_user_membership.title}">Edit user membership</title>
	<script type="text/javascript" src="../../js/jquery-2.1.1.min.js" th:src="@{/js/jquery-2.1.1.min.js}" ></script>
	<script type="text/javascript" src="../../js/bootstrap.min.js" th:src="@{/js/bootstrap.min.js}" ></script>

	<link rel="stylesheet" type="text/css" href="../../css/bootstrap.css" th:href="@{/css/bootstrap.css}"/>
	<link rel="stylesheet" type="text/css" href="../../css/Style.css" th:href="@{/css/Style.css}"/>
</head>
<body>

<th:block th:include="header :: header"></th:block>

<div class="container shadow" id="content">
	<div th:replace="makros :: topbar">
		Topbar ...
	</div>

	<div class="row">
		<div class="col-md-6 form-group">
			<h4 style="margin-bottom:5px" th:text="#{edit_user_membership.user.group}">Group Members</h4>
			<table class="table table-hover table-striped table-bordered table-condensed" id="insider" name="memberIds" th:object="${model}">
				<thead>
					<tr>
						<th>
							<input id="group-checkbox" type="checkbox" class="checkbox" />
						</th>
						<th>
							<span th:text="#{edit_user_membership.user.login}">Login</span>
							<!--span class="sortingArrows">
								<a id="order-by-displayname-asc" th:href="@{'' (action='sort', orderBy='displayName', asc=true)}"><img src="../../img/arrow_up.png" alt="" /></a>
								<a id="order-by-displayname-desc" th:href="@{'' (action='sort', orderBy='displayName', asc=false)}"><img src="../../img/arrow_down.png" alt="" /></a>
							</span-->
						</th>
						<th>
							<span th:text="#{edit_user_membership.user.givenName}">Given Name</span>
							<!--span class="sortingArrows">
								<a id="order-by-displayname-asc" th:href="@{'' (action='sort', orderBy='displayName', asc=true)}"><img src="../../img/arrow_up.png" alt="" /></a>
								<a id="order-by-displayname-desc" th:href="@{'' (action='sort', orderBy='displayName', asc=false)}"><img src="../../img/arrow_down.png" alt="" /></a>
							</span-->
						</th>
						<th>
							<span th:text="#{edit_user_membership.user.lastName}">Last Name</span>
							<!--span class="sortingArrows">
								<a id="order-by-displayname-asc" th:href="@{'' (action='sort', orderBy='displayName', asc=true)}"><img src="../../img/arrow_up.png" alt="" /></a>
								<a id="order-by-displayname-desc" th:href="@{'' (action='sort', orderBy='displayName', asc=false)}"><img src="../../img/arrow_down.png" alt="" /></a>
							</span-->
						</th>
					</tr>
				</thead>

				<tbody>
					<tr>
						<form id="filter-form" action="" method="POST">
							<!--/* ALL forms with PATCH, POST, PUT, and DELETE methods must include a CSRF-Token! */-->
							<th:block th:replace="makros :: csrf" />

							<!--/* All osiam-query relevant fields must begin with "query."!  */-->
							<td><input type="hidden" name="action" value="filter"/></td>
							<td><input id="filter-login" name="query.userName" type="text" /></td>
							<td><input id="filter-givenname" name="query.name.givenName" type="text" /></td>
							<td><input id="filter-familyname" name="query.name.familyName" type="text" /></td>
							<td>
								<button id="filter-button" th:text="#{msg.button.filter}" class="btn btn-default btn-sm" type="submit">Filter <span class="glyphicon glyphicon-filter"></span></button>
							</td>
						</form>
					</tr>
					<tr th:each="memberId : *{memberIds}">
						<td>
							<input type="checkbox" class="checkbox" />
						</td>
						<td th:text="${userList.get(memberId).userName}">
						</td>
						<td th:text="${userList.get(memberId).name} != null ? ${userList.get(memberId).name.givenName} : '-'">
						</td>
						<td th:text="${userList.get(memberId).name} != null ? ${userList.get(memberId).name.familyName} : '-'">
						</td>
						<td>
							<a th:href="@{'' (id=*{id}, remove=${memberId})}" class="btn btn-danger btn-sm">
								<span class="glyphicon glyphicon-minus"></span>
							</a>
						</td>
					</tr>
				</tbody>
			</table>
		</div>

		<div class="col-md-6 form-group">
			<h4 style="margin-bottom:5px" th:text="#{edit_user_membership.user.other}">External Group</h4>
			<table class="table table-hover table-striped table-bordered table-condensed" id="outsider" name="memberIds" th:object="${model}">
				<thead>
					<tr>
						<th>
							<input id="group-checkbox" type="checkbox" class="checkbox" />
						</th>
						<th>
							<span th:text="#{edit_user_membership.user.login}">Login</span>
							<!--span class="sortingArrows">
								<a id="order-by-displayname-asc" th:href="@{'' (action='sort', orderBy='displayName', asc=true)}"><img src="../../img/arrow_up.png" alt="" /></a>
								<a id="order-by-displayname-desc" th:href="@{'' (action='sort', orderBy='displayName', asc=false)}"><img src="../../img/arrow_down.png" alt="" /></a>
							</span-->
						</th>
						<th>
							<span th:text="#{edit_user_membership.user.givenName}">Vorname</span>
							<!--span class="sortingArrows">
								<a id="order-by-displayname-asc" th:href="@{'' (action='sort', orderBy='displayName', asc=true)}"><img src="../../img/arrow_up.png" alt="" /></a>
								<a id="order-by-displayname-desc" th:href="@{'' (action='sort', orderBy='displayName', asc=false)}"><img src="../../img/arrow_down.png" alt="" /></a>
							</span-->
						</th>
						<th>
							<span th:text="#{edit_user_membership.user.lastName}">Nachname</span>
							<!--span class="sortingArrows">
								<a id="order-by-displayname-asc" th:href="@{'' (action='sort', orderBy='displayName', asc=true)}"><img src="../../img/arrow_up.png" alt="" /></a>
								<a id="order-by-displayname-desc" th:href="@{'' (action='sort', orderBy='displayName', asc=false)}"><img src="../../img/arrow_down.png" alt="" /></a>
							</span-->
						</th>
					</tr>
				</thead>

				<tbody>
					<tr>
						<form id="filter-form" action="" method="POST">
							<!--/* ALL forms with PATCH, POST, PUT, and DELETE methods must include a CSRF-Token! */-->
							<th:block th:replace="makros :: csrf" />

							<!--/* All osiam-query relevant fields must begin with "query."!  */-->
							<td><input type="hidden" name="action" value="filter"/></td>
							<td><input id="filter-login" name="query.userName" type="text" /></td>
							<td><input id="filter-givenname" name="query.name.givenName" type="text" /></td>
							<td><input id="filter-familyname" name="query.name.familyName" type="text" /></td>
							<td>
								<button id="filter-button" th:text="#{msg.button.filter}" class="btn btn-default btn-sm" type="submit">Filter <span class="glyphicon glyphicon-filter"></span></button>
							</td>
						</form>
					</tr>
					<tr  th:each="userEntry : ${userList}"
							th:unless="${model.memberIds.contains(userEntry.key)}"
							th:with="user = ${userEntry.value}"
							th:value="${user.id}">
						<td>
							<input type="checkbox" class="checkbox" />
						</td>
						<td th:text="${user.userName}">
						</td>
						<td th:text="${user.name} != null ? ${user.name.givenName} : '-'">
						</td>
						<td th:text="${user.name} != null ? ${user.name.familyName} : '-'">
						</td>
						<td>
							<a th:href="@{'' (id=*{id}, action=add, userId=${user.id})}" class="btn btn-success btn-sm">
								<span class="glyphicon glyphicon-plus"></span>
							</a>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>

	<div class="row">
		<div class="col-sm-2 col-sm-offset-10 text-right">
			<a th:href="@{list}">
				<button class="btn btn-md btn-primary" type="button" id="btnBack" th:text="#{edit_group.cancel}">Back</button>
			</a>
		</div>
	</div>
</div>
</body>
</html>
